- name: Make sure we have the folder for odd installs
  become_user: "{{ username }}"
  ansible.builtin.file:
    path: "/home/{{ username }}/Installs"
    state: directory

- name: Load Flutter source from git
  become_user: "{{ username }}"
  ansible.builtin.git:
    repo: https://github.com/flutter/flutter.git
    dest: "/home/{{ username }}/Installs/flutter"

- name: Add flutter bin to the system PATH
  ansible.builtin.copy:
    content: "export PATH=$PATH:/home/{{ username }}/Installs/flutter/bin"
    dest: /etc/profile.d/flutter.sh
